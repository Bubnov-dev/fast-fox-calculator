$(document).ready((function(){const e=document.querySelectorAll(".calculator__info"),a=document.querySelectorAll(".calculator__info-tooltip");for(let d=0;d<e.length;d++){let r=e[d],i=a[d],n=Popper.createPopper(r,i,{modifiers:[{name:"offset",options:{offset:[0,8]}}]});function l(){i.setAttribute("data-show",""),n.update()}function t(){i.removeAttribute("data-show")}let s=["mouseleave","blur"];["mouseenter","focus"].forEach(e=>{r.addEventListener(e,l)}),s.forEach(e=>{r.addEventListener(e,t)})}document.querySelectorAll(".custom-select").forEach(e=>{new Choices(e,{searchEnabled:!1,itemSelectText:"",placeholder:!0,placeholderValue:"none"})}),input=$("#gerber-file"),input.on("change",(function(e){if(console.log(input[0].files[0].size),input[0].files[0].size>1e7)input.val("");else{var a="";"zip"==(a=$(this)[0].files&&$(this)[0].files.length>1?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop()).split(".").pop()?$("#gerber-subtitle").html(a):input.val("")}}));let d=new Map([["materials",new Map([["FR-4",1],["Alu",1.15]])],["layers",new Map([["1",1],["2",1.2],["4",1.8],["6",2.5]])],["designs",new Map([["1",1],["2",1.2],["3",1.8],["4",2.5]])],["width-plate",new Map([["0.4",1],["0.6",1.2],["0.8",1.8],["1.0",2.5]])],["finish",new Map([["HASL",1],["LFHASL",1.2],["ENIG",1.8]])],["width-cu",new Map([["35",1],["70",1.2]])]]);console.log(d),jQuery.expr[":"].regex=function(e,a,l){var t=l[3].split(","),d=/^(data|css):/,r={method:t[0].match(d)?t[0].split(":")[0]:"attr",property:t.shift().replace(d,"")};return new RegExp(t.join("").replace(/^\s+|\s+$/g,""),"ig").test(jQuery(e)[r.method](r.property))};let r=!0;function i(){$("input").removeAttr("disabled"),"alu"==$('[name="materials"]:checked').val()&&($('[name="layers"]:regex(value, 2|4|6)').attr("disabled","disabled"),$('[name="width-plate"]:regex(value, 0.4|0.6|0.8|2.0)').attr("disabled","disabled"),$('[name="color-mask"]:regex(value, purple|red|yellow|blue)').attr("disabled","disabled"),$('[name="finish"]:regex(value, ENIG)').attr("disabled","disabled"),$('[name="width-cu"]:regex(value, 70)').attr("disabled","disabled")),"1"==$('[name="layers"]:checked').val()&&($('[name="width-plate"]:regex(value, 0.4|0.6|0.8)').attr("disabled","disabled"),$('[name="color-mask"]:regex(value, purple)').attr("disabled","disabled"),$('[name="width-cu"]:regex(value, 70)').attr("disabled","disabled")),"4"==$('[name="layers"]:checked').val()&&($('[name="width-plate"]:regex(value, 0.4|0.6)').attr("disabled","disabled"),$('[name="width-cu"]:regex(value, 70)').attr("disabled","disabled")),"6"==$('[name="layers"]:checked').val()&&($('[name="width-plate"]:regex(value, 0.4|0.6|0.8|1.0)').attr("disabled","disabled"),$('[name="color-mask"]:regex(value, purple)').attr("disabled","disabled")),"service"==$('[name="panels"]').val()&&($('[name="designs"]:regex(value, [2-9])').attr("disabled","disabled"),$('[name="width-plate"]:regex(value, 0.4)').attr("disabled","disabled")),-1==$.inArray($('[name="panels"]').val(),["client","service"])&&$("input:regex(name, numX|numY)").attr("disabled","disabled"),-1!=$.inArray($('[name="width-plate"]:checked').val(),["0.4","0.6","0.8","1.0","1.2"])&&$('[name="width-cu"]:regex(value, 70)').attr("disabled","disabled"),-1!=$.inArray($('[name="width-plate"]:checked').val(),["0.4","0.6"])&&$('[name="layers"]:regex(value, 1|4|6)').attr("disabled","disabled"),-1!=$.inArray($('[name="width-plate"]:checked').val(),["0.4"])&&($('[name="finish"]:regex(value, LFHASL|ENIG)').attr("disabled","disabled"),$('[name="color-mask"]:regex(value, red|yellow)').attr("disabled","disabled")),"purple"==$('[name="color-mask"]:checked').val()&&($('[name="width-plate"]:regex(value, 0.4|0.6)').attr("disabled","disabled"),$('[name="layers"]:regex(value, 1|6)').attr("disabled","disabled")),-1!=$.inArray($('[name="color-mask"]:checked').val(),["red","yellow"])&&$('[name="width-plate"]:regex(value, 0.4)').attr("disabled","disabled"),"black"==$('[name="color-mask"]:checked').val()&&$('[name="width-cu"]:regex(value, 70)').attr("disabled","disabled"),"white"==$('[name="color-mask"]:checked').val()?$("#sh-color-black").prop("checked",!0):$("#sh-color-white").prop("checked",!0),$("[disabled]").prop("checked",!1);let e=1;$("input:checked").each((function(){let a=$(this),l=d.get($(this).attr("name"));console.log(a),console.log(a.attr("name")),l?(console.log(l),console.log("value of "+a.attr("value")+" is "+l.get(a.attr("value"))),l.get(a.attr("value"))&&(e*=l.get(a.attr("value")))):console.log("none")}));let a=1;console.log("panels: "+$('[name="panels-num"]').val());try{a=$("#width").val()*$("#height").val()/1e4*$('[name="panels-num"]').val()}catch{a=1}console.log("S = "+a),$(".calculator__result-price-rub .calculator__result-value").html(e),r?(r=!1,i()):r=!0}i(),$("input, select").on("change",(function(){i()})),$('input[type="text"]').on("keyup",(function(){let e=$(this).val();console.log(e),e=e.replace(/[^1-9]/g,""),$(this).val(e)}))}));